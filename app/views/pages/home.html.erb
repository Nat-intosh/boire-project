<h1>Bienvenue sur jab mon reuf</h1>
<%= link_to "Go to Cards", cards_path, class: "btn btn-primary" %>

<h2>Player List</h2>
<ul id="player-list">
  <!-- Player list will be dynamically populated by JavaScript -->
</ul>

<input type="text" id="pseudo-input" placeholder="Enter Player Pseudo">
<button onclick="addPlayer()">Add Player</button>
<button onclick="redirectToCards()">Go to Cards</button>

<script>
  let players = [];

  function addPlayer() {
    const pseudoInput = document.getElementById("pseudo-input");
    const pseudo = pseudoInput.value.trim();

    if (pseudo) {
      players.push(pseudo);
      renderPlayerList();
      pseudoInput.value = "";
    }
  }

  function renderPlayerList() {
    const playerList = document.getElementById("player-list");
    playerList.innerHTML = "";
    players.forEach((player, index) => {
      const li = document.createElement("li");
      li.textContent = player;

      const deleteButton = document.createElement("button");
      deleteButton.textContent = "Delete";
      deleteButton.onclick = () => deletePlayer(index); // Call deletePlayer function with index

      li.appendChild(deleteButton);
      playerList.appendChild(li);
    });
  }

  function deletePlayer(index) {
    players.splice(index, 1); // Remove player at given index
    renderPlayerList(); // Re-render player list
  }

  function redirectToCards() {
    if (players.length >= 2) {
      const playerParams = players.map(player => `players[]=${encodeURIComponent(player)}`).join("&");
      window.location.href = `/cards?${playerParams}`;
    } else {
      alert("Please add at least two players before proceeding to the cards page.");
    }
  }
</script>